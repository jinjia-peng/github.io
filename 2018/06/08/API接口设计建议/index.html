<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> API接口设计建议 · Vector123</title><meta name="description" content="API接口设计建议 - vector123"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.vector123.com/atom.xml" title="Vector123"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/vector123x" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">API接口设计建议</h1><div class="post-info">Jun 8, 2018</div><div class="post-content"><ol>
<li>涉及数目的 JSON 字段，用 int 作为数据类型会更友好，若使用 string 类型，数目为零时，应该使用“0”，不应为””（空串）。</li>
<li>凡是金额字段的，数据值不要使用 float、double 类型，因为使用 float、double 类型时，计算之后，会有精度丢失，导致计算结果有偏差，对于货币计算是不允许的。正确的做法是使用高精度类型的，如 Java 使用的 BigDecimal。</li>
<li>图片上传不应该置换 base64 再上传，图片原始数据置换成 base64 会比原文件增加 1/3，对于大图片来说，上传耗费的流量是一个大问题。</li>
<li>图形验证码字符集建议使用 base58，避免出现字符  “Il0O” 等难以辨认的字符，提升用户体验。</li>
<li>不要破坏统一的数据结构，毫不动摇的遵循 <code>{&quot;code&quot;: 0, &quot;msg&quot;: &quot;success&quot;, data: {}}</code>，会让前端同学省很多事。</li>
<li>确认好是一个还是两个以上，有两个同类型以上的数据项应当使用数组表示，一个则不允许使用数组存储。错误的表示会让前端人员产生歧义，程序也容易出错。</li>
<li>Object 类型字段默认值 null，不应为 [] 或 “”，int 类型字段默认为 0。</li>
</ol>
<a id="more"></a>
<p>完</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/07/31/工程化架构设计/" class="prev">PREV</a><a href="/2018/05/30/脚本插件中枢BitBar/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 - 2018 <a href="http://www.vector123.com">vector123</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-117611713-1",'auto');ga('send','pageview');</script></body></html>